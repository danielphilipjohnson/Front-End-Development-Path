(this["webpackJsonpamazon-clone"]=this["webpackJsonpamazon-clone"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(48),c=a.n(r),i=(a(61),a(49)),o=a(3),s=(a(62),a(63),a(50)),m=a.n(s),u=a(51),d=a.n(u),E=a(11),p=Object(n.createContext)(),_=function(e){var t=e.reducer,a=e.initialState,r=e.children;return l.a.createElement(p.Provider,{value:Object(n.useReducer)(t,a)},r)},h=function(){return Object(n.useContext)(p)},g=a(33),v=a.n(g),b=v.a.initializeApp({apiKey:"AIzaSyA6N9VQ3ONpYYSuZZDOjy7S10jvM3nAVrI",authDomain:"clone-f6aa7.firebaseapp.com",databaseURL:"https://clone-f6aa7.firebaseio.com",projectId:"clone-f6aa7",storageBucket:"clone-f6aa7.appspot.com",messagingSenderId:"782901146184",appId:"1:782901146184:web:5663d6ddb89c5bc7455e7d",measurementId:"G-3LSY1W09H5"}).firestore(),f=v.a.auth();var N=function(){var e=h(),t=Object(o.a)(e,2),a=t[0],n=a.basket,r=a.user;return t[1],l.a.createElement("div",{className:"header"},l.a.createElement(E.b,{to:"/"},l.a.createElement("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png"})),l.a.createElement("div",{className:"header__search"},l.a.createElement("input",{className:"header__searchInput",type:"text"}),l.a.createElement(m.a,{className:"header__searchIcon"})),l.a.createElement("div",{className:"header__nav"},l.a.createElement(E.b,{to:!r&&"/login"},l.a.createElement("div",{className:"header__option"},l.a.createElement("span",{onClick:function(){r&&f.signOut()},className:"header__optionLineOne"},"Hello ",r?r.email:"Guest"),l.a.createElement("span",{className:"header__optionLinetwo"},r?"Sign Out":"Sign In"))),l.a.createElement(E.b,{to:"/orders"},l.a.createElement("div",{className:"header__option"},l.a.createElement("span",{className:"header__optionLineOne"},"Returns"),l.a.createElement("span",{className:"header__optionLineTwo"},"& Orders"))),l.a.createElement("div",{className:"header__option"},l.a.createElement("span",{className:"header__optionLineOne"},"Your"),l.a.createElement("span",{className:"header__optionLinetwo"},"Prime")),l.a.createElement(E.b,{to:"/checkout"},l.a.createElement("div",{className:"header__optionBasket"},l.a.createElement(d.a,null),l.a.createElement("span",{className:"header__optionLineTwo header__basketCount"},null===n||void 0===n?void 0:n.length)))))};a(79);var O=function(){return l.a.createElement("div",{className:"subheader__container"},l.a.createElement("div",{className:"subheader__address"},l.a.createElement("span",null,"Deliever to User"),l.a.createElement("span",null,"London MK10 9AU")),l.a.createElement("ul",{className:"subheader_links"},l.a.createElement("li",null,"Books"),l.a.createElement("li",null," Prime Video"),l.a.createElement("li",null," DJPhilip's Amazon"),l.a.createElement("li",null," Best Sellers"),l.a.createElement("li",null," Today's Deals"),l.a.createElement("li",null,"Customer Service"),l.a.createElement("li",null," Gift Ideas"),l.a.createElement("li",null," Gift Cards & Top Up"),l.a.createElement("li",null," Home & Garden"),l.a.createElement("li",null," New Releases"),l.a.createElement("li",null,"Electronics"),l.a.createElement("li",null,"Vouchers"),l.a.createElement("li",null,"PC"),l.a.createElement("li",null,"Sell")),l.a.createElement("div",{className:"subheader__banner"},l.a.createElement("img",{src:"https://images-eu.ssl-images-amazon.com/images/G/02/AMAZON-FASHION/2020/FASHION/MBFW/MERCH/GW_DESKT_SWMS_400x39._CB407686517_.jpg",alt:""})))};a(80);var k=function(){return l.a.createElement("div",{className:"checkoutSubNav"},l.a.createElement("ul",{className:"checkoutSubNav__items"},l.a.createElement("li",null,"Amazon.co.uk"),l.a.createElement("li",null,"Today's Deals"),l.a.createElement("li",null,"Warehouse Deals"),l.a.createElement("li",null,"Outlet"),l.a.createElement("li",null,"Subscribe & Save"),l.a.createElement("li",null,"Vouchers"),l.a.createElement("li",null,"Amazon Family"),l.a.createElement("li",null,"Amazon Prime"),l.a.createElement("li",null,"Prime Video"),l.a.createElement("li",null,"Prime Student"),l.a.createElement("li",null,"Mobile Apps"),l.a.createElement("li",null,"Amazon Pickup Locations"),l.a.createElement("li",null,"Amazon Assistant")))},S=(a(81),a(82),a(30)),y=a.n(S);var j=function(e){var t=e.id,a=e.title,n=e.image,r=e.price,c=e.rating,i=h(),s=Object(o.a)(i,2),m=(s[0].basket,s[1]);return l.a.createElement("div",{className:"product",key:t},l.a.createElement("div",{className:"product__info"},l.a.createElement("p",null,a),l.a.createElement("p",{className:"product__price"},l.a.createElement("small",null,"$"),l.a.createElement("strong",null,r)),l.a.createElement("div",{className:"product__rating"},Array(c).fill().map((function(e,t){return l.a.createElement("p",{key:t},"\u2b50")})))),l.a.createElement(y.a,null,l.a.createElement("img",{class:"product__image",src:n})),l.a.createElement("button",{onClick:function(){m({type:"ADD_TO_BASKET",item:{title:a,image:n,price:r,rating:c}})}},"Add to Basket"))};var A=function(){return l.a.createElement("div",{className:"home"},l.a.createElement("div",{className:"home__container"},l.a.createElement("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg"}),l.a.createElement("div",{className:"home__row"},l.a.createElement(j,{id:"1",title:"The lean startup",price:29.99,image:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSB1dS4HWYeftUtMYTKlSJhxKK_dtk-J7kJVljnW-zl01X62b7cuyZGn-11S7YHKIYr203-ZriO&usqp=CAc",rating:5}),l.a.createElement(j,{id:"2",title:"Norton 360 Deluxe 2020, Antivirus software for 5 Devices and 1-year subscription with automatic renewal, Includes Secure VPN and Password Manager, PC/Mac/iOS/Android, Activation Code by Post",price:17.95,image:"/images/norton.jpg",rating:5})),l.a.createElement("div",{className:"home__row"},l.a.createElement(j,{id:"3",title:"Echo Dot (3rd Gen) - Smart speaker with Alexa - Charcoal Fabric",price:49.99,image:"/images/echodot.jpg",rating:5}),l.a.createElement(j,{id:"4",title:"Shark HZ400UKT, Vacuum Cleaner, Blue & Grey",price:199.99,image:"/images/sharkhover.jpg",rating:5}),l.a.createElement(j,{id:"5",title:" LEGO 10698 Classic Large Creative Brick Box Construction Set, Toy Storage, Fun Colourful Toy Bricks for Lego Masters",price:39.99,image:"/images/lego.jpg",rating:5})),l.a.createElement("div",{className:"home__row"},l.a.createElement(j,{id:"6",title:"Mastering React Test-Driven Development: Build rock-solid, well-tested web apps with React, Redux and GraphQL Paperback \u2013 3 May 2019",price:30.99,image:"/images/reactbook.jpg",rating:5}))))},C=(a(84),a(23)),w=a.n(C),T=(a(86),a(21)),B=a(17),P=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},x=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(B.a)(Object(B.a)({},e),{},{basket:[].concat(Object(T.a)(e.basket),[t.item])});case"EMPTY_BASKET":return Object(B.a)(Object(B.a)({},e),{},{basket:[]});case"REMOVE_FROM_BASKET":var a=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(T.a)(e.basket);return a>=0?n.splice(a,1):console.warn("Cant remove product (id: ".concat(t.id,") as its not in basket!")),Object(B.a)(Object(B.a)({},e),{},{basket:n});case"SET_USER":return Object(B.a)(Object(B.a)({},e),{},{user:t.user});default:return e}},M=a(4);var I=function(){var e=h(),t=Object(o.a)(e,2),a=t[0].basket,n=(t[1],Object(M.f)());return l.a.createElement("div",{className:"subtotal"},l.a.createElement(w.a,{renderText:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Subtotal (",a.length," items): ",l.a.createElement("strong",null," ".concat(e))),l.a.createElement("small",{className:"subtotal__gift"},l.a.createElement("input",{type:"checkbox"}),"This order contains a gift"))},decimalScale:2,value:P(a),displayType:"text",thousandSeparator:!0,prefix:"$"}),l.a.createElement("button",{onClick:function(e){return n.push("/payment")}},"Proceed to Checkout"))};a(87);var D=function(e,t){var a=e.id,n=e.image,r=e.title,c=e.price,i=e.rating,s=e.hideButton,m=h(),u=Object(o.a)(m,2),d=(u[0].basket,u[1]);return l.a.createElement(y.a,null,l.a.createElement("div",{className:"checkoutProduct",key:a},l.a.createElement("img",{className:"checkoutProduct__image",src:n}),l.a.createElement("div",{className:"checkoutProduct__info"},l.a.createElement("p",{className:"checkoutProduct__title"},r),l.a.createElement("p",{className:"checkoutProduct__price"},l.a.createElement("small",null,"$"),l.a.createElement("strong",null,c)),l.a.createElement("div",{className:"checkoutProduct__rating"},Array(i).fill().map((function(e,t){return l.a.createElement("p",null,"\ud83c\udf1f")}))),!s&&l.a.createElement("button",{onClick:function(){d({type:"REMOVE_FROM_BASKET",id:a})}},"Remove from Basket"))))};var G=function(){var e=h(),t=Object(o.a)(e,2),a=t[0],n=a.basket,r=a.user;return t[1],l.a.createElement("div",{className:"checkout"},l.a.createElement("div",{className:"checkout__left"},l.a.createElement("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423493668_.jpg"}),l.a.createElement("div",null,l.a.createElement("h3",null,"Hello, ",null===r||void 0===r?void 0:r.email),l.a.createElement("h2",{className:"checkout__title"},"Shopping Basket"),n.map((function(e){return l.a.createElement(D,{key:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),l.a.createElement("div",{className:"checkout__right"},l.a.createElement(I,null)))};a(88);var L=function(){var e=Object(M.f)(),t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),m=s[0],u=s[1];return l.a.createElement("div",{className:"login"},l.a.createElement(E.b,{to:"/"},l.a.createElement("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png"})),l.a.createElement("div",{className:"login__container"},l.a.createElement("h1",null,"Sign-in"),l.a.createElement("form",null,l.a.createElement("h5",null,"E-mail"),l.a.createElement("input",{type:"text",value:r,onChange:function(e){return c(e.target.value)}}),l.a.createElement("h5",null,"Password"),l.a.createElement("input",{type:"password",value:m,onChange:function(e){return u(e.target.value)}}),l.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),f.signInWithEmailAndPassword(r,m).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton"},"Sign In")),l.a.createElement("p",null,"By signing-in you agree to the AMAZON FAKE CLONE Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice."),l.a.createElement("button",{onClick:function(t){t.preventDefault(),f.createUserWithEmailAndPassword(r,m).then((function(t){t&&e.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__registerButton"},"Create your Amazon Account")))},R=a(25),z=a.n(R),H=a(36),K=(a(90),a(22)),Y=a(52),U=a.n(Y).a.create({baseURL:"http://localhost:5001/clone-f6aa7/us-central1/api"});var V=function(){var e=h(),t=Object(o.a)(e,2),a=t[0],r=a.basket,c=a.user,i=t[1],s=Object(M.f)(),m=Object(K.useStripe)(),u=Object(K.useElements)(),d=Object(n.useState)(!1),p=Object(o.a)(d,2),_=p[0],g=p[1],v=Object(n.useState)(""),f=Object(o.a)(v,2),N=f[0],O=f[1],k=Object(n.useState)(null),S=Object(o.a)(k,2),y=S[0],j=S[1],A=Object(n.useState)(!1),C=Object(o.a)(A,2),T=C[0],B=C[1],x=Object(n.useState)(!0),I=Object(o.a)(x,2),G=I[0],L=I[1],R=Object(n.useState)(!0),Y=Object(o.a)(R,2),V=Y[0],W=Y[1];Object(n.useEffect)((function(){var e=Math.round(100*P(r));B(e>1),function(){var e=Object(H.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Math.round(100*P(r)),console.log(t),!(t>1)){e.next=10;break}return console.log(t),e.next=6,U({method:"post",url:"/payments/create?total=".concat(Math.round(100*P(r)))}).catch((function(e){console.log(e)}));case 6:a=e.sent,W(a.data.clientSecret),e.next=11;break;case 10:console.log("basket is empty");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r]),console.log("THE SECRET IS >>>",V);var F=function(){var e=Object(H.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("submitting"),t.preventDefault(),O(!0),e.next=5,m.confirmCardPayment(V,{payment_method:{card:u.getElement(K.CardElement)}}).then((function(e){var t=e.paymentIntent;console.log(t),b.collection("users").doc(null===c||void 0===c?void 0:c.uid).collection("orders").doc(t.id).set({basket:r,amount:t.amount,created:t.created}),g(!0),j(null),O(!1),i({type:"EMPTY_BASKET"}),s.push("/orders")}));case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"payment"},l.a.createElement("div",{className:"payment__container"},l.a.createElement("h1",null,"Checkout (",l.a.createElement(E.b,{to:"/checkout"},null===r||void 0===r?void 0:r.length," items"),")"),l.a.createElement("div",{className:"payment__section"},l.a.createElement("div",{className:"payment__title"},l.a.createElement("h3",null,"Delivery Address")),l.a.createElement("div",{className:"payment__address"},l.a.createElement("p",null,null===c||void 0===c?void 0:c.email),l.a.createElement("p",null,"123 React Lane"),l.a.createElement("p",null,"Los Angeles, CA"))),l.a.createElement("div",{className:"payment__section"},l.a.createElement("div",{className:"payment__title"},l.a.createElement("h3",null,"Review items and delivery")),l.a.createElement("div",{className:"payment__items"},r.map((function(e){return l.a.createElement(D,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),l.a.createElement("div",{className:"payment__section"},l.a.createElement("div",{className:"payment__title"},l.a.createElement("h3",null,"Payment Method")),l.a.createElement("div",{className:"payment__details"},l.a.createElement("form",{onSubmit:F},l.a.createElement(K.CardElement,{onChange:function(e){L(e.empty),j(e.error?e.error.message:"")}}),l.a.createElement("div",{className:"payment__priceContainer"},l.a.createElement(w.a,{renderText:function(e){return l.a.createElement("h3",null,"Order Total: ",e)},decimalScale:2,value:P(r),displayType:"text",thousandSeparator:!0,prefix:"$"}),T?l.a.createElement("button",{disabled:N||G||_,empty:!0},l.a.createElement("span",null,N?l.a.createElement("p",null,"Processing"):"Buy Now"," "),console.log(T)):"basket empty"),y&&l.a.createElement("div",null,y))))))},W=a(53),F=(a(107),a(108),a(54)),Z=a.n(F);var J=function(e){var t,a=e.order;return l.a.createElement("div",{className:"order"},l.a.createElement("h2",null,"Order"),l.a.createElement("p",null,Z.a.unix(a.data.created).format("MMMM Do YYYY, h:mma")),l.a.createElement("p",{className:"order__id"},l.a.createElement("small",null,a.id)),null===(t=a.data.basket)||void 0===t?void 0:t.map((function(e){return l.a.createElement(D,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})})),l.a.createElement(w.a,{renderText:function(e){return l.a.createElement("h3",{className:"order__total"},"Order Total: ",e)},decimalScale:2,value:a.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"}))};var $=function(){var e=h(),t=Object(o.a)(e,2),a=t[0],r=(a.basket,a.user),c=(t[1],Object(n.useState)([])),i=Object(o.a)(c,2),s=i[0],m=i[1];return Object(n.useEffect)((function(){r?b.collection("users").doc(null===r||void 0===r?void 0:r.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):m([])}),[r]),l.a.createElement("div",{className:"orders"},l.a.createElement("h1",null,"Your Orders"),l.a.createElement("div",{className:"orders__order"},null===s||void 0===s?void 0:s.map((function(e){return l.a.createElement(J,{order:e})}))))},Q=Object(W.a)("pk_test_51HQAuMJeWABh5Sp38xHP9NIrjr86bLxMbEP8cYZ1FaFhVjTHZ7SkvISgqjuIAO8aILnOc6Q8e6BEso6nRn896Hb6009G667iad");var q=function(){var e=h(),t=Object(o.a)(e,2);Object(i.a)(t[0]);var a=t[1];return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){console.log(e),a(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),l.a.createElement(E.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(M.c,null,l.a.createElement(M.a,{path:"/orders"},l.a.createElement($,null)),l.a.createElement(M.a,{path:"/login"},l.a.createElement(L,null)),l.a.createElement(M.a,{path:"/checkout"},l.a.createElement(N,null),l.a.createElement(O,null),l.a.createElement(k,null),l.a.createElement(G,null)),l.a.createElement(M.a,{path:"/payment"},l.a.createElement(N,null),l.a.createElement(K.Elements,{stripe:Q},l.a.createElement(V,null))),l.a.createElement(M.a,{path:"/"},l.a.createElement(N,null),l.a.createElement(O,null),l.a.createElement(A,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(_,{initialState:{basket:[],subtotal:0},reducer:x},l.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a(111)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},90:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.feedf760.chunk.js.map